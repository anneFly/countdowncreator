var Utils=function(t,e,n){"use strict";return n.maxValues={year:3e3,month:12,day:31,hour:23,minute:59},n.minValues={year:(new Date).getFullYear(),month:1,day:1,hour:0,minute:0},n.checkInput=function(t,e){return""!==e&&e>=n.minValues[t]&&n.maxValues[t]>=e},n.checkDate=function(t,e,n){var i=new Date(parseInt(t,10),parseInt(e,10)-1,parseInt(n,10)),a=i.getFullYear()===parseInt(t,10),r=i.getMonth()===parseInt(e,10)-1,u=i.getDate()===parseInt(n,10);return a&&r&&u},n.validateForm=function(e){var i={},a=!0;return t.each(e,function(e,n){var a=t(n).data("validate"),r=t(n).val();i[a]=r}),t.each(i,function(t,i){var r=n.checkInput(t,parseInt(i,10));e.filter(['[data-validate="',t,'"]'].join("")).toggleClass("invalid",!r),a=a&&r}),a?n.checkDate(i.year,i.month,i.day):!1},n.getCountdownData=function(e){var n={};return t.each(e,function(e,i){var a=t(i).attr("name"),r=t(i).val();n[a]=r}),n},n}(jQuery,this,this.Utils||{}),Countdown=function(t,e,n,i,a,r){"use strict";e.Ui=e.Ui||i;var u=function(t){this.title=t.title,this.year=parseInt(t.year,10),this.month=parseInt(t.month,10),this.day=parseInt(t.day,10),this.hour=parseInt(t.hour,10),this.minute=parseInt(t.minute,10),this.cdTime=this.getCdTime(),this.timer=r};return u.prototype.getCdTime=function(){return new Date(this.year,this.month-1,this.day,this.hour,this.minute).getTime()},u.prototype.calculateCountdown=function(){var t=Date.now(),e=this.cdTime>t?this.cdTime-t:0,n=0|e/1e3/60/60/24,i=(0|e/1e3/60/60)-(0|24*n),a=(0|e/1e3/60)-(0|60*24*n)-(0|60*i),r=(0|e/1e3)-(0|60*60*24*n)-(0|60*60*i)-(0|60*a);return console.log(e),{days:n,hours:i,minutes:a,seconds:r}},u.prototype.count=function(){var t=this.calculateCountdown();i.updateView(t),0===t.days&&0===t.hours&&0===t.minutes&&0===t.seconds&&this.stopCounting()},u.prototype.startCounting=function(){var t=this;this.timer=e.setInterval(function(){t.count()},1e3)},u.prototype.stopCounting=function(){var t=this;e.clearInterval(t.timer)},a.create=function(t){return new u(t)},a}(jQuery,this,this.Utils,this.Ui||{},Countdown||{}),Ui=function(t,e,n,i,a){"use strict";i=e.Countdown||{};var r=function(t){this.init(t),this.bindEvents()};r.prototype.init=function(e){this.type=e.type,this.$el=t(e.selector),this.$input=this.$el.find("input"),this.maxValue=n.maxValues[this.type],this.minValue=n.minValues[this.type],this.value=""!==this.$input.val()?parseInt(this.$input.val(),10):e.value},r.prototype.bindEvents=function(){var e=this,i={add:function(t){return t+=1},sub:function(t){return t-=1}};this.$el.on("click","button",function(){return""===e.$input.val()?(e.renderValue(),void 0):(e.value=""!==e.$input.val()?parseInt(e.$input.val(),10):e.value,e.value=i[t(this).data("role")](e.value),n.checkInput(e.type,e.value)?(e.renderValue(),void 0):(e.value=i[t(this).data("undorole")](e.value),void 0))}),this.$input.on("blur",function(){return n.checkInput(e.type,t(this).val())?!0:(e.value=t(this).val()>e.maxValue?e.maxValue:e.minValue,e.renderValue(),void 0)})},r.prototype.renderValue=function(){var t,e=parseInt(this.$input.attr("maxlength"),10),n=(""+this.value).length,i=[];for(t=0;e-n>t;t++)i.push("0");this.$input.val([i.join(""),this.value].join(""))};var u=function(e){var r=this;this.$el=t(e.selector),this.$validateFields=t(e.requiredFields),this.$validateBtn=t(e.validateBtn),this.$el.on("submit",function(){return n.validateForm(r.$validateFields)}),this.$validateBtn.on("click",function(){var t=n.validateForm(r.$validateFields);if(t){var e=n.getCountdownData(r.$el.find("input"));a.Cd=new i.create(e)}})};return a.form=new u({selector:"form",requiredFields:"[data-validate]",validateBtn:"button.show-preview"}),a.fields=[],a.fields.push(new r({selector:"#yearWrapper",type:"year",value:(new Date).getFullYear()}),new r({selector:"#monthWrapper",type:"month",value:1}),new r({selector:"#dayWrapper",type:"day",value:1}),new r({selector:"#hourWrapper",type:"hour",value:0}),new r({selector:"#minuteWrapper",type:"minute",value:0})),a.updateView=function(t){console.log(t)},a}(jQuery,this,this.Utils,this.Countdown||{},this.Ui||{});